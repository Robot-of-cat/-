(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc0f3e3e"],{2306:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{"element-loading-text":t.loadingText,data:t.list,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"插件名",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"中文名称",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.displayname))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"简介",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.description))]}}])}),t._v(" "),n("el-table-column",{attrs:{"class-name":"status-col",label:"开发者",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.author))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"版本",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.version))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"插件类型",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("pluginType")(e.row.type)))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"安装&升级",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:t._f("statusFilter")(e.row.state),loading:t.butt_loading[e.row.name],disabled:t.butt_disabled[e.row.name],size:"mini"},on:{click:function(n){return n.stopPropagation(),t.doAdmin(e.row.name,e.row.state)}}},[t._v(t._s(e.row.state))])]}}])})],1)],1)},i=[],l=(n("a481"),n("9448")),s={filters:{statusFilter:function(t){var e={"一键安装":"success","一键升级":"warning","已安装":""};return e[t]},pluginType:function(t){var e={0:"第三方插件",1:"官方插件",2:"认证插件"};return e[t]}},data:function(){return{list:null,listLoading:!0,loadingText:"数据加载中",butt_loading:[],butt_disabled:[]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0,Object(l["a"])({op:"getalllist"}).then((function(e){t.list=e.data,t.listLoading=!1}))},doAdmin:function(t,e){var n=this;if("已安装"===e)return this.$router.replace({path:"/plugin/mypluginedit",query:{name:t}}),!0;this.butt_loading[t]=!0,this.butt_disabled[t]=!0,this.listLoading=!0,this.loadingText="正在"+e+t+"插件，请稍候……";var a="";"一键安装"===e?a="install":"一键升级"===e&&(a="update"),Object(l["c"])({op:a,name:t}).then((function(a){var i=a.data;"一键安装"===e&&(2e4===a.code&&"0000"===i.error?(n.fetchData(),n.$message({message:a.message,type:"success"})):n.$message.error(a.message),n.butt_loading[t]=!1,n.butt_disabled[t]=!1,n.listLoading=!1),"一键升级"===e&&(2e4===a.code&&"0000"===i.error?(n.fetchData(),n.$message({message:a.message,type:"success"})):n.$message.error(a.message),n.butt_loading[t]=!1,n.butt_disabled[t]=!1,n.listLoading=!1)}))}}},r=s,o=n("2877"),u=Object(o["a"])(r,a,i,!1,null,null,null);e["default"]=u.exports},9448:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return s}));var a=n("b775");function i(t){return Object(a["a"])({url:"/api/plugin_list.py",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/api/plugin_update.py",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/api/plugin_admin.py",method:"get",params:t})}}}]);