(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5242f8f3"],{9448:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return i}));var l=a("b775");function n(e){return Object(l["a"])({url:"/api/plugin_list.py",method:"get",params:e})}function o(e){return Object(l["a"])({url:"/api/plugin_update.py",method:"get",params:e})}function i(e){return Object(l["a"])({url:"/api/plugin_admin.py",method:"get",params:e})}},c1d5:function(e,t,a){"use strict";var l=a("c317"),n=a.n(l);n.a},c317:function(e,t,a){},df69:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本配置",name:"base"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"插件名"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"中文简称"}},[a("el-input",{model:{value:e.form.displayName,callback:function(t){e.$set(e.form,"displayName",t)},expression:"form.displayName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"简介"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"语音触发词"}},[e._l(e.form.triggerwords,(function(t){return a("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(t)}}},[e._v(e._s(t))])})),e._v(" "),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 添加触发词")])],2),e._v(" "),a("el-form-item",{attrs:{label:"系统插件"}},[a("el-switch",{model:{value:e.form.IsSystem,callback:function(t){e.$set(e.form,"IsSystem",t)},expression:"form.IsSystem"}}),e._v(" "),a("span",{staticClass:"tishi"},[e._v("系统插件：是指被触发启动后会一直保持在后台运行")])],1),e._v(" "),a("el-form-item",{attrs:{label:"自动启动"}},[a("el-switch",{model:{value:e.form.AutoLoader,callback:function(t){e.$set(e.form,"AutoLoader",t)},expression:"form.AutoLoader"}}),e._v(" "),a("span",{staticClass:"tishi"},[e._v("自动启动：是指此插件会随系统同时启动并保持在后台运行")])],1),e._v(" "),a("el-form-item",{attrs:{label:"升级URL"}},[a("el-input",{model:{value:e.repository_url,callback:function(t){e.repository_url=t},expression:"repository_url"}})],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"移动设备控制",name:"xiaocx"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"mobile"},[e._l(e.form_control,(function(t,l){return[a("draggable",{key:l,staticClass:"list-group",attrs:{list:e.form_control[l].body,group:"people"},on:{change:e.log}},[t.lable?a("div",{staticClass:"my-lable"},[e._v("\n                  "+e._s(t.lable)+"\n                ")]):e._e(),e._v(" "),e._l(t.body,(function(t,l){return["button"==t.type?a("el-button",{key:l,attrs:{size:"mini"}},[e._v(e._s(t.text))]):e._e(),e._v(" "),"slider"==t.type?a("el-slider",{key:l,model:{value:e.default_val.slider,callback:function(t){e.$set(e.default_val,"slider",t)},expression:"default_val.slider"}}):e._e(),e._v(" "),"switch"==t.type?a("el-switch",{key:l,attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"}}):e._e()]}))],2)]}))],2)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-col",[a("div",{staticClass:"add-lable"},[a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("div",{staticClass:"al-title"},[e._v("添加一个控件容器")]),e._v(" "),a("el-form-item",{attrs:{label:"容器名称"}},[a("el-input")],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("添加")])],1)],1)],1)]),e._v(" "),a("el-col",[a("div",{staticClass:"add-button"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.xcxvalue,callback:function(t){e.xcxvalue=t},expression:"xcxvalue"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),a("el-button",[e._v("添加")]),e._v(" "),"button"==e.xcxvalue?a("div",[a("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.formLabelAlign}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.formLabelAlign.name,callback:function(t){e.$set(e.formLabelAlign,"name",t)},expression:"formLabelAlign.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动区域"}},[a("el-input",{model:{value:e.formLabelAlign.region,callback:function(t){e.$set(e.formLabelAlign,"region",t)},expression:"formLabelAlign.region"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动形式"}},[a("el-input",{model:{value:e.formLabelAlign.type,callback:function(t){e.$set(e.formLabelAlign,"type",t)},expression:"formLabelAlign.type"}})],1)],1)],1):e._e()],1)])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"升级与维护",name:"update"}},[a("el-form",{ref:"form",attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"当前状态："}},[a("el-switch",{on:{change:e.bindIsEnable},model:{value:e.form.IsEnable,callback:function(t){e.$set(e.form,"IsEnable",t)},expression:"form.IsEnable"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"当前版本："}},[e._v("\n          V"+e._s(e.form.version)+"版\n          "),a("el-button",{attrs:{type:"primary",size:"mini",loading:e.update_loading},on:{click:e.onUpdate}},[e._v(e._s(e.update_butttext))])],1),e._v(" "),a("el-form-item",{attrs:{label:"插件管理："}},[a("el-button",{attrs:{type:"danger",size:"mini",disabled:e.unistall.disabled},on:{click:e.onRemove}},[e._v(e._s(e.unistall.butttext))])],1)],1)],1)],1)],1)},n=[],o=(a("a481"),a("7f7f"),a("310e")),i=a.n(o),s=a("9448"),r={components:{draggable:i.a},data:function(){return{form:{name:""},repository_type:"",repository_url:"",form_control:[],default_val:{slider:20},inputVisible:!1,inputValue:"",listLoading:!0,activeName:"base",options:[{value:"switch",label:"开关按钮"},{value:"button",label:"按键按钮"},{value:"text",label:"文本内容"},{value:"slider",label:"滑动选择器"}],xcxvalue:"",repository_opint:[{value:"git",label:"GIT"},{value:"http",label:"HTTP"}],update_butttext:"检查更新",update_loading:!1,unistall:{disabled:!1,butttext:"卸载插件"}}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0;var t=this.$route.query.name;Object(s["a"])({op:"getinfo",name:t}).then((function(t){e.form=t.data,e.form_control=e.form.control,e.repository_type=e.form.repository.type,e.repository_url=e.form.repository.url,e.listLoading=!1}))},goBack:function(){this.$router.replace({path:"/plugin/myplugin"})},onSubmit:function(){console.log("onSubmit")},handleClose:function(e){this.form.triggerwords.splice(this.form.triggerwords.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.form.triggerwords.push(e),this.inputVisible=!1,this.inputValue=""},updateForm:function(e){var t=this,a={op:"upconfig",name:this.form.name,data:e};Object(s["b"])(a).then((function(e){if(console.log(e),2e4===e.code){var a=e.data;"0000"===a.error?t.$message({message:e.message,type:"success"}):t.$message.error(e.message)}else t.$message.error(e.message)}))},bindIsEnable:function(e){console.log(e);var t={IsEnable:e};this.updateForm(t)},onUpdate:function(){var e=this;this.update_butttext="正在检查更新中……",this.update_loading=!0;var t=this.form.name;Object(s["c"])({op:"update",name:t}).then((function(t){if(2e4===t.code){var a=t.data;"0000"===a.error?(e.$message({message:t.message,type:"success"}),e.form.version=a.version):e.$message.error(t.message)}else e.$message.error(t.message);e.update_butttext="检查更新",e.update_loading=!1}))},onRemove:function(){var e=this;this.unistall.disabled=!0,this.$confirm("此操作将永久删除该插件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.unistall.butttext="正在卸载……";var t=e.form.name;Object(s["b"])({op:"uninstall",name:t}).then((function(t){if(2e4===t.code){var a=t.data;"0000"===a.error?(e.$message({message:t.message,type:"success"}),e.$router.replace({path:"/plugin/myplugin"})):(e.$message.error(t.message),e.unistall.butttext="卸载插件",e.unistall.disabled=!1)}else e.$message.error(t.message),e.unistall.butttext="卸载插件",e.unistall.disabled=!1}))})).catch((function(){e.unistall.disabled=!1}))},log:function(e){window.console.log(e)}}},u=r,c=(a("c1d5"),a("2877")),m=Object(c["a"])(u,l,n,!1,null,null,null);t["default"]=m.exports}}]);