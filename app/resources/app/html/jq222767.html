<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>canvas圆形扩散效果-jq22.com</title>
<script src="https://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
<style>
* {
	margin:0;
	padding:0;
}
body{background-color: #000;}
.mai{position: fixed;}
.mai #canvas {display:block;position: absolute;}
.mai svg{position: absolute;top:24px;left:24px;}
</style>
</head>
<body>
<div class="mai">
	<canvas id="canvas"></canvas>
 	<svg t="1561126448931" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5437" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32"><defs><style type="text/css"></style></defs><path d="M698.624 501.376a170.112 170.112 0 0 1-170.112 170.112h-58.496a170.112 170.112 0 0 1-170.112-170.112V250.048a170.048 170.048 0 0 1 170.112-170.112h58.496a170.112 170.112 0 0 1 170.112 170.112v251.328z" fill="#979FCB" p-id="5438"></path><path d="M725.76 410.624v104.512c0 104.448-87.68 189.12-195.904 189.12H462.464c-108.224 0-195.968-84.672-195.968-189.12V410.624h-31.808v123.904c0 118.912 99.904 215.296 223.04 215.296h76.736c123.264 0 223.104-96.384 223.104-215.296V410.624h-31.808z" fill="#394B97" p-id="5439"></path><path d="M453.184 719.104h92.16v162.944h-92.16z" fill="#394B97" p-id="5440"></path><path d="M734.656 944v-12.224c0-40.896-38.976-74.048-87.232-74.048h-296.32c-48.128 0-87.232 33.216-87.232 74.048v12.224h470.784z" fill="#394B97" p-id="5441"></path><path d="M520.896 225.088h174.464v41.152H520.896zM298.944 225.088h174.464v41.152H298.944zM520.896 297.536h174.464v41.152H520.896zM298.944 297.536h174.464v41.152H298.944zM520.896 375.68h174.464v41.216H520.896zM298.944 375.68h174.464v41.216H298.944zM520.896 448.256h174.464v41.088H520.896zM298.944 448.256h174.464v41.088H298.944z" fill="#5161A4" p-id="5442"></path></svg>
</div>


<script>
window.onload = function() {
	var canvas = document.getElementById('canvas');
	var ctx = canvas.getContext('2d');

	canvas.width = 80;
	canvas.height = 80;

	var radius = 15
	var timer = 0;
	var is_up_do = ''
	function drawCircle() {
		ctx.beginPath();
		ctx.arc(40, 40, radius, 0, Math.PI * 2); //划弧
		ctx.closePath();
		ctx.lineWidth = 3;
		ctx.strokeStyle = 'rgba(38, 147, 255,1)';
		ctx.stroke();

		radius += 0.5;
		if (radius > 30) {
			radius = 0;
		}
	}

	function render( num ) {
		var prev = ctx.globalCompositeOperation;
		ctx.globalCompositeOperation = 'destination-in';
		ctx.globalAlpha = 0.80;
		ctx.fillRect(0, 0, canvas.width, canvas.height);
		ctx.globalCompositeOperation = prev;
		drawCircle();
	};

	function up_staut(){
		var timer2 = setInterval(function() {
			render()
			if (radius==0){window.clearInterval(timer2);}
		}, 20);
	}

	function do_staut(){
		radius = 15
		render()
	}

	var testtimer = setInterval(function() {
		//var num = Math.round(Math.random())
		var num = Math.random()
		if (num>0.60){
			num = 1
		}else{
			num = 0
		}
		if ( num == 0 ){
			if (is_up_do != num) do_staut()
		}else{
			if (is_up_do != num || radius==0) up_staut()
		}
		is_up_do = num
	}, 200);
}
</script>

</body>
</html>
